install.packages('EcoHydRology')
library("EcoHydRology", lib.loc="~/R/win-library/3.1")
pwd
ls
ls *
end
dir()
cd PhD
cd('PhD')
cd
# reads ASP data from a csv file
# runs SnowMelt from EcoHydRology using T & P data
library("EcoHydRology", lib.loc="/home/drew/R/i486-pc-linux-gnu-library/3.0")
fn <- "PhD/data/ASP/1C18P.csv" # Mission Ridge station
lat <- 50.75
aspall <- read.csv(fn,skip=8)
#logaspfin <- is.finite(aspall$Precipitation) &
#  is.finite(aspall$Temp..Max.) &
#  is.finite(aspall$Temp..Min.) &
#  (aspall$Temp..Max. >= aspall$Temp..Min.)
#asp <- aspall[logaspfin,]
asp <- aspall[is.finite(aspall$Precipitation) &
is.finite(aspall$Temp..Max.) &
is.finite(aspall$Temp..Min.) &
(aspall$Temp..Max. >= aspall$Temp..Min.),]
aspsm <- SnowMelt(Date=asp$Date, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=lat)
View(asp)
View(aspsm)
writeMat("../matfiles/ASPbasetesting/aspswe.mat",aspswe=aspswe)
writeMat("../matfiles/ASPbasetesting/aspsm.mat",aspsm=aspsm$SnowWaterEq_mm)
writeMat("../matfiles/ASPbasetesting/aspdate.mat",aspdate=asp$Date)
install.packages('R.matlab')
library("EcoHydRology", lib.loc="~/R/win-library/3.1")
library("R.matlab", lib.loc="~/R/win-library/3.1")
writeMat("../matfiles/ASPbasetesting/aspswe.mat",aspswe=aspswe)
writeMat("../matfiles/ASPbasetesting/aspsm.mat",aspsm=aspsm$SnowWaterEq_mm)
writeMat("../matfiles/ASPbasetesting/aspdate.mat",aspdate=asp$Date)
writeMat("../matfiles/ASPbasetesting/aspswe.mat",aspswe=aspswe)
aspswe <- asp$Snow.Water.Equivalent
writeMat("../matfiles/ASPbasetesting/aspswe.mat",aspswe=aspswe)
writeMat("../matfiles/ASPbasetesting/aspswe.mat",aspswe=aspswe)
writeMat
writeMat("PhD/matfiles/ASPbasetesting/aspswe.mat",aspswe=aspswe)
writeMat("PhD/matfiles/ASPbasetesting/aspsm.mat",aspsm=aspsm$SnowWaterEq_mm)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=asp$Date)
aspdate <- as.Date(asp$Date)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=asp$Date)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
aspdate
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
fmt <- "%Y-%m-%d"
aspdate <- as.Date(asp$Date,format=fmt)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
aspdate <- as.list(asp$Date)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
aspdate <- as.numeric(asp$Date)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
aspdate <- as.Date(asp$Date,format=fmt)
aspdate[1]
fn <- "PhD/data/ASP/4A27P.csv" # Kwadacha station
aspall <- read.csv(fn,skip=8)
#logaspfin <- is.finite(aspall$Precipitation) &
#  is.finite(aspall$Temp..Max.) &
#  is.finite(aspall$Temp..Min.) &
#  (aspall$Temp..Max. >= aspall$Temp..Min.)
#asp <- aspall[logaspfin,]
asp <- aspall[is.finite(aspall$Precipitation) &
is.finite(aspall$Temp..Max.) &
is.finite(aspall$Temp..Min.) &
(aspall$Temp..Max. >= aspall$Temp..Min.),]
aspswe <- asp$Snow.Water.Equivalent
aspsm <- SnowMelt(Date=asp$Date, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=lat)
writeMat("PhD/matfiles/ASPbasetesting/aspswe2.mat",aspswe2=aspswe)
writeMat("PhD/matfiles/ASPbasetesting/aspsm2.mat",aspsm2=aspsm$SnowWaterEq_mm)
aspdate <- as.numeric(asp$Date)
writeMat("PhD/matfiles/ASPbasetesting/aspdate.mat",aspdate=aspdate)
library("EcoHydRology", lib.loc="~/R/win-library/3.1")
fn <- "PhD/data/ASP/4A27P.csv" # Kwadacha station
aspall <- read.csv(fn,skip=8)
lat <- 50.75
aspall <- read.csv(fn,skip=8)
#logaspfin <- is.finite(aspall$Precipitation) &
#  is.finite(aspall$Temp..Max.) &
#  is.finite(aspall$Temp..Min.) &
#  (aspall$Temp..Max. >= aspall$Temp..Min.)
#asp <- aspall[logaspfin,]
asp <- aspall[is.finite(aspall$Precipitation) &
is.finite(aspall$Temp..Max.) &
is.finite(aspall$Temp..Min.) &
(aspall$Temp..Max. >= aspall$Temp..Min.),]
aspswe <- asp$Snow.Water.Equivalent
aspsm <- SnowMelt(Date=asp$Date, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=lat)
fmt <- "%Y-%m-%d"
aspdate <- as.Date(asp$Date,format=fmt)
aspdate
view
View
View(aspdate)
smswe <- aspsm$SnowWaterEq_mm
line(aspswe)
lines(aspswe)
plot.new
plot(aspswe)
plot(aspswe,"l")
plot(aspswe,"p")
plot(aspswe,smswe,"l")
plot(aspswe,aspdate,"l")
plot(aspdate,aspswe,"l")
plot(aspdate,smswe,"l")
plot(aspdate,aspswe,aspdate,smswe,"l")
plot(aspdate,smswe,"l")
lines(aspdate,aspswe,col="red")
plot(aspdate,aspswe,col="red")
plot(aspdate,aspswe,col="red","l")
lines(aspdate,smswe)
detach("package:XML", unload=TRUE)
library("XML", lib.loc="~/R/win-library/3.1")
a=c(T,T,F,F)
a
a=c(T,T,F,F,NA,NA)
a
sum(a)
sum(a[is.finite(a)])
a[is.finite(a)]
!a[is.finite(a)]
!a[!is.na(a)]
debugSource('~/PhD/Rcode/SnowMelt2L.R')
source('~/PhD/Rcode/aspEco_base.r')
debugSource('~/PhD/Rcode/SnowMelt2L.R')
debugSource('~/PhD/Rcode/aspEco_base.r')
debugSource('~/PhD/Rcode/SnowMelt2L.R')
debugSource('~/PhD/Rcode/SnowMelt2L.R')
debugSource('~/PhD/Rcode/SnowMelt2L.R')
debugSource('~/PhD/Rcode/aspEco_base.r')
View(Results)
debugSource('~/PhD/Rcode/aspEco_base.r')
View(sm_asp)
View(sm_asp2L)
sm_asp <- SnowMelt(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
sm_asp2L <- SnowMelt2L(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
debugSource('~/PhD/Rcode/SnowMelt2L.R')
sm_asp2L <- SnowMelt2L(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
source('~/PhD/Rcode/SnowMelt2L.R')
debugSource('~/PhD/Rcode/aspEco_base.r')
out_asp[yrct] <- paste(istn,try(
exectime <- round(system.time({
sm_asp <- SnowMelt(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
sm_asp2L <- SnowMelt2L(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
}),3)[3]
))
source('~/PhD/Rcode/SnowMelt2L.R')
out_asp[yrct] <- paste(istn,try(
exectime <- round(system.time({
sm_asp <- SnowMelt(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
sm_asp2L <- SnowMelt2L(Date=aspdate, precip_mm=asp$Precipitation,
Tmax_C=asp$Temp..Max., Tmin_C=asp$Temp..Min., lat_deg=stnlat[istn])
}),3)[3]
))
View(sm_asp)
View(sm_asp2L)
a=data.frame(sm_asp$SnowMelt_mm,sm_asp2L$SnowMelt_mm)
View(a)
source('~/PhD/Rcode/SnowMelt2L.R')
source('~/PhD/Rcode/aspEco_base.r')
source('~/PhD/Rcode/SnowMelt2L.R')
debugSource('~/PhD/Rcode/aspEco_base.r')
View(sm_asp2L)
